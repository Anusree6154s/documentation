<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Blog &amp; Docs | I’m learning to build web apps using the MERN stack, Next.js, and TypeScript. I love tinkering with new tech and sharing what I learn along the way. This is my little corner where I jot down anything that I find difficult in my tech journey. I hope you find this space useful!</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Blog &amp; Docs" />
<meta name="author" content="Anusree Anilkumar" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I’m learning to build web apps using the MERN stack, Next.js, and TypeScript. I love tinkering with new tech and sharing what I learn along the way. This is my little corner where I jot down anything that I find difficult in my tech journey. I hope you find this space useful!" />
<meta property="og:description" content="I’m learning to build web apps using the MERN stack, Next.js, and TypeScript. I love tinkering with new tech and sharing what I learn along the way. This is my little corner where I jot down anything that I find difficult in my tech journey. I hope you find this space useful!" />
<link rel="canonical" href="https://anusree6154s.github.io/documentation/docs/autogenerated-jekyll-website/" />
<meta property="og:url" content="https://anusree6154s.github.io/documentation/docs/autogenerated-jekyll-website/" />
<meta property="og:site_name" content="Blog &amp; Docs" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Blog &amp; Docs" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Anusree Anilkumar"},"description":"I’m learning to build web apps using the MERN stack, Next.js, and TypeScript. I love tinkering with new tech and sharing what I learn along the way. This is my little corner where I jot down anything that I find difficult in my tech journey. I hope you find this space useful!","headline":"Blog &amp; Docs","url":"https://anusree6154s.github.io/documentation/docs/autogenerated-jekyll-website/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/documentation/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://anusree6154s.github.io/documentation/feed.xml" title="Blog &amp; Docs" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/documentation/">Blog &amp; Docs</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/documentation/table-of-contents">Table of Contents</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="home">
<h2 class="post-list-heading">Posts</h2>
    <ul class="post-list"><li><span class="post-meta">18 Jan 2025</span>
        <h3>
          <a class="post-link" href="/documentation/README/">
            Readme
          </a>
        </h3><h2 id="readme-formatting-guidelinesrules">Readme Formatting Guidelines/Rules</h2>
<ul>
  <li><a href="https://medium.com/analytics-vidhya/writing-github-readme-e593f278a796">Majority guidelines</a></li>
  <li><a href="https://gist.github.com/kigiri/4b1d64eba2d465a2ffc1342a0e9e7d6f">Image alignment/resize guidelines</a></li>
</ul>
</li><li><span class="post-meta">18 Jan 2025</span>
        <h3>
          <a class="post-link" href="/documentation/README/">
            Readme
          </a>
        </h3>
<hr />
<p>layout: post
—</p>

<h2 id="comprehensive-guide-to-writing-readme-files">Comprehensive Guide to Writing README Files</h2>

<h3 id="1-project-title">1. Project Title</h3>

<ul>
  <li><strong>What to Include</strong>: The name of the project.</li>
  <li><strong>How to Format</strong>: Use a prominent heading (e.g., <code class="language-plaintext highlighter-rouge"># Project Title</code>).</li>
  <li><strong>Example</strong>:
    <div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh"># My Amazing Project</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="2-description">2. Description</h3>

<ul>
  <li><strong>What to Include</strong>: A brief overview of what the project does, its purpose, and its key features.</li>
  <li><strong>How to Format</strong>: Write a few sentences or a short paragraph.</li>
  <li><strong>Example</strong>:
    <div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code>My Amazing Project is a web application that helps users manage their tasks effectively. With features like task creation, deadline tracking, and file uploads, it simplifies task management for individuals and teams.
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="3-table-of-contents">3. Table of Contents</h3>

<ul>
  <li><strong>What to Include</strong>: A list of sections in the README for easy navigation.</li>
  <li><strong>How to Format</strong>: Use links to section headings.</li>
  <li><strong>Example</strong>:
```markdown
    <h2 id="table-of-contents">Table of Contents</h2>
    <ul>
      <li><a href="#installation">Installation</a></li>
      <li><a href="#usage">Usage</a></li>
      <li><a href="#features">Features</a></li>
      <li><a href="#contributing">Contributing</a></li>
      <li><a href="#license">License</a>
```</li>
    </ul>
  </li>
</ul>

<h3 id="4-installation">4. Installation</h3>

<ul>
  <li><strong>What to Include</strong>: Step-by-step instructions on how to set up the project locally. This can include prerequisites, dependencies, and installation commands.</li>
  <li><strong>How to Format</strong>: Use code blocks for commands and list steps clearly.</li>
  <li><strong>Example</strong>:
    <div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gu">## Installation</span>

To install and set up the project, follow these steps:
<span class="p">
1.</span> Clone the repository:
   <span class="p">```</span><span class="nl">bash
</span>   git clone https://github.com/username/my-amazing-project.git
</code></pre></div>    </div>
    <ol>
      <li>Navigate to the project directory:
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>my-amazing-project
</code></pre></div>        </div>
      </li>
      <li>Install dependencies:
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span>
</code></pre></div>        </div>
        <p>```</p>
      </li>
    </ol>
  </li>
</ul>

<h3 id="5-usage">5. Usage</h3>

<ul>
  <li><strong>What to Include</strong>: Instructions on how to use the project after installation. Include examples and screenshots if applicable.</li>
  <li><strong>How to Format</strong>: Use code snippets and images to clarify usage.</li>
  <li><strong>Example</strong>:
    <div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gu">## Usage</span>

To start the application, run the following command:

<span class="p">```</span><span class="nl">bash
</span>npm start
</code></pre></div>    </div>

    <p>Once the application is running, open your web browser and navigate to <code class="language-plaintext highlighter-rouge">http://localhost:3000</code>.</p>

    <p><img src="screenshot.png" alt="Screenshot" /></p>

    <h3 id="example-of-adding-a-task">Example of Adding a Task</h3>

    <ol>
      <li>Click on the “Add Task” button.</li>
      <li>Fill in the task details and click “Save”.
```</li>
    </ol>
  </li>
</ul>

<h3 id="6-features">6. Features</h3>

<ul>
  <li><strong>What to Include</strong>: A list of key features or functionalities of the project.</li>
  <li><strong>How to Format</strong>: Use bullet points or a numbered list.</li>
  <li><strong>Example</strong>:
```markdown
    <h2 id="features">Features</h2>
    <ul>
      <li>Create and manage tasks</li>
      <li>Set deadlines and reminders</li>
      <li>Upload files related to tasks</li>
      <li>Mark tasks as done
```</li>
    </ul>
  </li>
</ul>

<h3 id="7-contributing">7. Contributing</h3>

<ul>
  <li><strong>What to Include</strong>: Guidelines for contributing to the project, such as how to report issues, request features, or submit pull requests.</li>
  <li><strong>How to Format</strong>: Clearly outline the process.</li>
  <li><strong>Example</strong>:
    <div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gu">## Contributing</span>

We welcome contributions! To contribute, please follow these steps:
<span class="p">
1.</span> Fork the repository.
<span class="p">2.</span> Create a new branch:
   <span class="p">```</span><span class="nl">bash
</span>   git checkout <span class="nt">-b</span> feature/YourFeature
</code></pre></div>    </div>
    <ol>
      <li>Make your changes and commit them.</li>
      <li>Push to the branch:
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git push origin feature/YourFeature
</code></pre></div>        </div>
      </li>
      <li>Submit a pull request.
```</li>
    </ol>
  </li>
</ul>

<h3 id="8-license">8. License</h3>

<ul>
  <li><strong>What to Include</strong>: Information about the project’s license, including a link to the full license text.</li>
  <li><strong>How to Format</strong>: Mention the type of license and link to the LICENSE file.</li>
  <li><strong>Example</strong>:
    <div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gu">## License</span>

This project is licensed under the MIT License - see the <span class="p">[</span><span class="nv">LICENSE</span><span class="p">](</span><span class="sx">LICENSE</span><span class="p">)</span> file for details.
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="9-acknowledgments">9. Acknowledgments</h3>

<ul>
  <li><strong>What to Include</strong>: Acknowledge any libraries, frameworks, or resources that were helpful in developing the project.</li>
  <li><strong>How to Format</strong>: List the acknowledgments in bullet points.</li>
  <li><strong>Example</strong>:
```markdown
    <h2 id="acknowledgments">Acknowledgments</h2>
    <ul>
      <li><a href="https://reactjs.org/">React</a> - A JavaScript library for building user interfaces.</li>
      <li><a href="https://mui.com/">MUI</a> - React components for faster and easier web development.
```</li>
    </ul>
  </li>
</ul>

<h3 id="10-badges-optional">10. Badges (Optional)</h3>

<ul>
  <li><strong>What to Include</strong>: Badges for build status, coverage, npm version, etc.</li>
  <li><strong>How to Format</strong>: Use Markdown to add badges at the top of the README.</li>
  <li><strong>Example</strong>:
    <div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">![</span><span class="nv">Build Status</span><span class="p">](</span><span class="sx">https://img.shields.io/badge/build-passing-brightgreen</span><span class="p">)</span>
<span class="p">![</span><span class="nv">npm version</span><span class="p">](</span><span class="sx">https://img.shields.io/npm/v/npm.svg</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="11-faq-optional">11. FAQ (Optional)</h3>

<ul>
  <li><strong>What to Include</strong>: Common questions and answers related to the project.</li>
  <li><strong>How to Format</strong>: List questions and their answers in a clear manner.</li>
  <li><strong>Example</strong>:
    <div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gu">## FAQ</span>
<span class="gs">**Q: Can I use this project for commercial purposes?**</span>
A: Yes, you can use it as long as you comply with the license terms.

<span class="gs">**Q: Is there a demo available?**</span>
A: A live demo can be found at <span class="p">[</span><span class="nv">Demo Link</span><span class="p">](</span><span class="sx">https://example.com</span><span class="p">)</span>.
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="12-contact-information-optional">12. Contact Information (Optional)</h3>

<ul>
  <li><strong>What to Include</strong>: How users or contributors can reach out with questions or suggestions.</li>
  <li><strong>How to Format</strong>: Provide your email or link to a contact form.</li>
  <li><strong>Example</strong>:
    <div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gu">## Contact</span>

For questions or suggestions, feel free to reach out to me at <span class="p">[</span><span class="nv">your-email@example.com</span><span class="p">](</span><span class="sx">mailto:your-email@example.com</span><span class="p">)</span>.
</code></pre></div>    </div>
  </li>
</ul>

<hr />

<h3 id="best-practices">Best Practices</h3>

<ul>
  <li><strong>Clarity and Brevity</strong>: Be clear and concise in your descriptions. Avoid jargon unless necessary.</li>
  <li><strong>Markdown Formatting</strong>: Use Markdown syntax effectively to format your README for better readability.</li>
  <li><strong>Update Regularly</strong>: Keep your README updated with any changes in the project, features, or installation instructions.</li>
  <li><strong>Include Visuals</strong>: Use screenshots, diagrams, or GIFs to illustrate how the project works.</li>
</ul>

<h3 id="example-readme-template">Example README Template</h3>

<p>Here’s a simple template based on the structure outlined above:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh"># Project Title</span>

A brief description of what the project does and its purpose.

<span class="gu">## Table of Contents</span>
<span class="p">-</span> <span class="p">[</span><span class="nv">Installation</span><span class="p">](</span><span class="sx">#installation</span><span class="p">)</span>
<span class="p">-</span> <span class="p">[</span><span class="nv">Usage</span><span class="p">](</span><span class="sx">#usage</span><span class="p">)</span>
<span class="p">-</span> <span class="p">[</span><span class="nv">Features</span><span class="p">](</span><span class="sx">#features</span><span class="p">)</span>
<span class="p">-</span> <span class="p">[</span><span class="nv">Contributing</span><span class="p">](</span><span class="sx">#contributing</span><span class="p">)</span>
<span class="p">-</span> <span class="p">[</span><span class="nv">License</span><span class="p">](</span><span class="sx">#license</span><span class="p">)</span>
<span class="p">-</span> <span class="p">[</span><span class="nv">Acknowledgments</span><span class="p">](</span><span class="sx">#acknowledgments</span><span class="p">)</span>

<span class="gu">## Installation</span>
<span class="p">
1.</span> Clone the repository:
   <span class="p">```</span><span class="nl">bash
</span>   git clone https://github.com/username/my-amazing-project.git
</code></pre></div></div>
<ol>
  <li>Navigate to the project directory:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>my-amazing-project
</code></pre></div>    </div>
  </li>
  <li>Install dependencies:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span>
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="usage">Usage</h2>

<p>To start the application, run the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm start
</code></pre></div></div>

<p>Open your web browser and navigate to <code class="language-plaintext highlighter-rouge">http://localhost:3000</code>.</p>

<h2 id="features-1">Features</h2>
<ul>
  <li>List of features here.</li>
</ul>

<h2 id="contributing">Contributing</h2>

<ol>
  <li>Fork the repository.</li>
  <li>Create a new branch.</li>
  <li>Make your changes and commit them.</li>
  <li>Push to the branch and submit a pull request.</li>
</ol>

<h2 id="license">License</h2>

<p>This project is licensed under the MIT License - see the <a href="LICENSE">LICENSE</a> file for details.</p>

<h2 id="acknowledgments-1">Acknowledgments</h2>
<ul>
  <li>Libraries or resources used in the project.
```</li>
</ul>

</li><li><span class="post-meta">18 Jan 2025</span>
        <h3>
          <a class="post-link" href="/documentation/README/">
            Readme
          </a>
        </h3><h1 id="concepts-related-to-react-node-web-app">Concepts related to React-Node Web App</h1>

</li><li><span class="post-meta">18 Jan 2025</span>
        <h3>
          <a class="post-link" href="/documentation/README/">
            Readme
          </a>
        </h3><p>git cheat sheet: https://media.licdn.com/dms/image/v2/D4D22AQFWkWeD6D4ksA/feedshare-shrink_1280/feedshare-shrink_1280/0/1729225766763?e=1732147200&amp;v=beta&amp;t=lRJJDZeffcMU0rbvRJi0oSef2p3xGOG9BQWXG9dhrTQ</p>

<h3 id="example-commit-message">Example Commit Message</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>feat(task-manager): add task sorting feature

Implement a new feature that allows users to sort tasks by their deadlines. This improvement enhances user experience by enabling better task management.
</code></pre></div></div>

<h3 id="breakdown-of-the-commit-message">Breakdown of the Commit Message</h3>

<ol>
  <li><strong>Type</strong>:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">feat</code>: This indicates that a new feature has been added to the project.</li>
    </ul>
  </li>
  <li><strong>Scope</strong>:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">(task-manager)</code>: This specifies the part of the codebase that the change affects, which is the task manager component.</li>
    </ul>
  </li>
  <li><strong>Description</strong>:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">add task sorting feature</code>: A brief summary of what was done. It’s clear and to the point.</li>
    </ul>
  </li>
  <li><strong>Body</strong> (optional):
    <ul>
      <li>The body provides additional context about the change. Here, it describes what the new feature does and its benefits.</li>
    </ul>
  </li>
</ol>

<h3 id="other-examples">Other Examples</h3>

<h4 id="bug-fix">Bug Fix</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fix(task-table): resolve table sorting bug

Fix an issue where tasks were not sorting correctly when the user clicked the header. This resolves discrepancies in the task display order.
</code></pre></div></div>

<h4 id="documentation-update">Documentation Update</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docs: update README with setup instructions

Revise the README to include step-by-step setup instructions for new contributors, improving accessibility to the project.
</code></pre></div></div>

<h4 id="style-change">Style Change</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>style(TaskModal): adjust button alignment

Change the alignment of the buttons in the TaskModal component to improve the visual layout without affecting functionality.
</code></pre></div></div>

<h4 id="refactor">Refactor</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>refactor(file-upload): simplify file validation logic

Refactor the file validation logic in the FileUpload component to make it more readable and maintainable without changing the behavior.
</code></pre></div></div>

<h4 id="test-addition">Test Addition</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>test(task-service): add unit tests for createTask function

Add unit tests for the createTask function to ensure that it handles various input scenarios correctly.
</code></pre></div></div>

<h4 id="chore">Chore</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chore: update dependencies

Update project dependencies to their latest versions to improve security and performance.
</code></pre></div></div>

<h3 id="summary">Summary</h3>
<p>By following this structured format, your commit messages become more informative and standardized, making it easier for collaborators and contributors to understand the changes made to the codebase.</p>
</li><li><span class="post-meta">18 Jan 2025</span>
        <h3>
          <a class="post-link" href="/documentation/README/">
            Readme
          </a>
        </h3><h2 id="guidelines-to-cleaner-git-commits">Guidelines to cleaner git commits</h2>

</li><li><span class="post-meta">18 Jan 2025</span>
        <h3>
          <a class="post-link" href="/documentation/README/">
            Readme
          </a>
        </h3><h2 id="css">Css</h2>

</li><li><span class="post-meta">18 Jan 2025</span>
        <h3>
          <a class="post-link" href="/documentation/typescript/">
            Typescript
          </a>
        </h3>A brief description 2</li><li><span class="post-meta">17 Jan 2025</span>
        <h3>
          <a class="post-link" href="/documentation/takehome-guidelines/">
            Takehome Guidelines
          </a>
        </h3>A brief description</li><li><span class="post-meta">19 Aug 2024</span>
        <h3>
          <a class="post-link" href="/documentation/tests/">
            Tests
          </a>
        </h3><p>Tests related documentation</p>
<h1 id="tests">Tests</h1>

</li><li><span class="post-meta">19 Aug 2024</span>
        <h3>
          <a class="post-link" href="/documentation/passport-jwt/">
            Passport Jwt
          </a>
        </h3>
<p>Documentation for passport JWT as I understand it.</p>

<h1 id="passport-jwt-documentaion">Passport-jwt Documentaion</h1>

<h2 id="table-of-contents">Table of Contents</h2>

<ol>
  <li><a href="#overview">Overview</a></li>
  <li><a href="#features-and-usage">Features and Usage</a>
    <ul>
      <li><a href="#installation-and-import">Installation and Import</a></li>
      <li><a href="#Configuration">Configuration</a>
        <ul>
          <li><a href="#basic">Basic Code Structure</a></li>
          <li><a href="#Parts">Parts of Code in detail</a>
            <ul>
              <li><a href="Imports">Imports</a></li>
              <li><a href="#passport"><code class="language-plaintext highlighter-rouge">passport.use(name[optional], strategy)</code></a></li>
              <li><a href="#Strategy"><code class="language-plaintext highlighter-rouge">new Startegy(options, verifyCallback)</code></a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#full-structure">Full Code Structure (seperated into modules)</a></li>
    </ul>
  </li>
  <li><a href="#authentication">Authentication</a>
    <ul>
      <li><a href="#With">With session support (w/o callback)</a></li>
      <li><a href="#Without">Without session support (w/ callback)</a></li>
    </ul>
  </li>
  <li><a href="#passing-jwt-token">Methods to pass JWT Token</a></li>
</ol>

<h2 id="overview">Overview</h2>

<ul>
  <li>A middleware for Express.js framework that provides authentication and authorization using JSON Web Tokens (JWT).</li>
  <li>A passport strategy to work with JWT</li>
  <li>This only handles what we can do with a JWT token created using passport. To create a token checkout <a href="http://passportdocumentation">Passport</a></li>
</ul>

<h2 id="features-and-usage">Features and Usage</h2>

<ol>
  <li>Installation and Import
<a id="installation-and-import"></a>
    <ul>
      <li>Install: <code class="language-plaintext highlighter-rouge">npm install passport-jwt</code></li>
      <li>Import: <code class="language-plaintext highlighter-rouge">const { Strategy, ExtractJwt } = require("passport-jwt");</code>
        <ul>
          <li><em>passport-jwt is a class with 2 properties - Strategy and ExtractJwt</em></li>
          <li><em>Strategy is a class with 2 parameters passed to its contructor</em></li>
          <li><em>ExtractJwt is an object with various sub properties</em></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Configuration
<a id="Configuration"></a></p>

    <ul>
      <li>
        <p>Basic Structure:
<a id="basic"></a></p>

        <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">JwtStrategy</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">passport-jwt</span><span class="dl">"</span><span class="p">).</span><span class="nx">Strategy</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">ExtractJwt</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">passport-jwt</span><span class="dl">"</span><span class="p">).</span><span class="nx">ExtractJwt</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">passport</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">passport</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Options for the strategy</span>
<span class="kd">const</span> <span class="nx">opts</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">jwtFromRequest</span><span class="p">:</span> <span class="nx">ExtractJwt</span><span class="p">.</span><span class="nx">fromAuthHeaderAsBearerToken</span><span class="p">(),</span> <span class="c1">// Extract token from Authorization header</span>
  <span class="na">secretOrKey</span><span class="p">:</span> <span class="dl">"</span><span class="s2">your_jwt_secret_key</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// Secret key for verifying token</span>
<span class="p">};</span>

<span class="c1">// JWT Strategy</span>
<span class="nx">passport</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span>
  <span class="k">new</span> <span class="nx">JwtStrategy</span><span class="p">(</span><span class="nx">opts</span><span class="p">,</span> <span class="p">(</span><span class="nx">jwtPayload</span><span class="p">,</span> <span class="nx">done</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Find the user based on the jwtPayload.sub (subject)</span>
    <span class="nx">User</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="nx">jwtPayload</span><span class="p">.</span><span class="nx">sub</span> <span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">user</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">done</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">done</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">user</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">done</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// User not found</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">})</span>
<span class="p">);</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>Parts of the configuration:
<a id="Parts"></a></p>

        <ol>
          <li>Imports:
<a id="Imports"></a>
            <ul>
              <li><code class="language-plaintext highlighter-rouge">const {Strategy,ExtractJwt} = require("passport-jwt")</code></li>
              <li><code class="language-plaintext highlighter-rouge">const passport = require("passport");</code></li>
            </ul>
          </li>
          <li>passport.use() method to register strategy (2 ways):
<a id="passport"></a>
            <details>
    <summary>
    <code>passport.use(Strategy)</code> - Default Strategy
    </summary>

- Registers a strategy directly.
- Will be treated as the default strategy.
- Allows you to refer to the strategy by the name _jwt_ later in the *passport* method `passport.authenticate('jwt')`.
</details>

            <details>
    <summary>
    <code>passport.use(name, Strategy)</code> - Named Strategy [optional]
    </summary>

- Allows you to refer to the strategy by the name _jwt_ later in the *passport* method `passport.authenticate('name')`.
</details>
          </li>
          <li>Strategy (has 2 parameters):
<a id="Strategy"></a>
            <ul>
              <li>
                <p>Has two parameters: <code class="language-plaintext highlighter-rouge">opts</code> and <code class="language-plaintext highlighter-rouge">verify</code></p>
              </li>
              <li>Parameters:
                <details>
  <summary>
      <code>`opts`</code> - (object) Options
  </summary>
                
  - This parameter is an object that defines various options for the strategy.

  - Example:
      ```js
      const opts = {
          jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),
          secretOrKey: "your_jwt_secret_key",
          issuer: "your_issuer", // optional
          algorithms: ["HS256"], // optional
          ignoreExpiration: false, // optional, defaults to false
      };
      ```
  - Properties:

      1. <details>
              <summary>
              <code>jwtFromRequest</code> - (function) To specify method of Jwt extraction
              </summary>

          - Specifies how the JWT will be extracted from the incoming request from client using _ExtractJwt_ class.
          - Example
              ```javascript
              const opts = {
                  jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken();
              }
              ```

          - All options (Properties of ExtractJwt):

          1. <details>
              <summary>
              <code>ExtractJwt.fromAuthHeaderAsBearerToken()</code>
              </summary>

              - **Usage**: Extracts the JWT from the Authorization header, assuming the JWT is prefixed by the word Bearer.
              - **Input parameter**: none
              - **Example**:

              ```js
              jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken();
              ```

              </details>

          2. <details>
              <summary>
              <code>ExtractJwt.fromHeader(header_name)</code>
              </summary>

              - **Usage**: Extracts the JWT from a custom header in the request.
              - **Input parameter**: header_name (string) - The name of the custom header containing the JWT.
              - **Example**:

              ```js
              jwtFromRequest: ExtractJwt.fromHeader('auth_token')
              ```

              </details>


          3. <details>
              <summary>
              <code>ExtractJwt.fromBodyField(field_name)</code>
              </summary>

              - **Usage**:  Extracts the JWT from a specific field in the request body (typically used in form submissions or JSON payloads).
              - **Input parameter**: field_name (string) - The name of the field in the request body that contains the JWT.
              - **Example**:

              ```js
              jwtFromRequest: ExtractJwt.fromBodyField('token')
              ```

              </details>

          4. <details>
              <summary>
              <code>ExtractJwt.fromUrlQueryParameter(param_name)</code>
              </summary>

              - **Usage**:  Extracts the JWT from a URL query parameter.
              - **Input parameter**: param_name (string) - The name of the query parameter in the URL that contains the JWT.
              - **Example**:

              ```js
              jwtFromRequest: ExtractJwt.fromUrlQueryParameter('token')
              ```
              </details>
                        
          5. <details>
              <summary>
              <code>fromAuthHeaderWithScheme(auth_scheme) </code>
              </summary>

              - **Usage**:  Extracts the JWT from Authorization Header with the specified auth_scheme
              - **Input parameter**: (string) Auth scheme like Bearer, Token, etc
              - **Example**:

                  ```js
                  jwtFromRequest: ExtractJwt.ExtractJwt.fromAuthHeaderWithScheme('Token')
                  ```
              </details>

          6. <details>
              <summary>
              <code>fromExtractors([array of extractor functions]) </code>
              </summary>

              - **Usage**:  Lets us define multiple extractors to extract jwt from different sources one after other.
              - **Input parameter**: (array) Array of extractors
              - **Example**:

                  ```js
                  const extractors = [
                      ExtractJwt.fromAuthHeaderAsBearerToken(),         // Try the Bearer token from Authorization header
                      ExtractJwt.fromUrlQueryParameter('auth_token')    // Then try the token from the URL query parameter
                  ];

                  const opts = {
                      jwtFromRequest: ExtractJwt.fromExtractors(extractors),
                      secretOrKey: 'your_secret_key'
                  };
                  ```
              </details>
                        
          7. <details>
              <summary>
              <code>Custom Extractors</code>
              </summary>

              - **Usage**:  Lets us define custom extractoinof tokens from anywhere
              - **Example**:
                  ```js
                  //when extracting from cookies using cookie parser
                  var cookieParser = require('cookie-parser')
                  const express = require('express');

                  const app = express()
                  app.use(cookieParser())
                                
                  //custom extractor
                  var cookieExtractor = function (req) {
                  var token = null;
                  if (req &amp;&amp; req.cookies) {
                      token = req.cookies["jwt"];
                  }
                  return token;
                  };

                  const opts = {
                      jwtFromRequest: cookieExtractor,
                      secretOrKey: 'your_secret_key'
                  };
                  ```
              </details>


          </details>

      2. <details>
          <summary>
              <code>secretOrKey</code> - (string or buffer) Secret key to verify JWT
          </summary>

          - The key used to verify the JWT signature. This is essential for validating the authenticity of the token.

          - **For symmetric algorithms** (e.g., HS256, HS384, HS512), `secretOrKey` will be a shared secret string or buffer used by both the server that signs the JWT and the server that verifies it.
          - **For asymmetric algorithms** (e.g., RS256, RS384, RS512), `secretOrKey` will be a public key that verifies the JWT, while the corresponding private key is used to sign the JWT.

          - Examples:
              - Symmetric key:
                  ```js
                  const opts = {
                      secretOrKey: 'your_jwt_secret_key' //can be any random word
                  };
                  ```
              - Asymmetric key:
                  ```js
                  const opts = {
                      secretOrKey: fs.readFileSync('./path/to/public.key', 'utf8')
                  };
                  ```
              - Note:
                  - If using symmetric encryption (e.g., HS256), the same secretOrKey must be used for both signing and verifying the token.
                  - If using asymmetric encryption (e.g., RS256), the secretOrKey should be the public key, while the private key is used to sign the token.
                  - It is important to securely manage this key, as exposure could compromise the security of your system.
                            
          </details>

      3. <details>
          <summary>
              <code>secretOrKeyProvider</code> - (function) [optional] Function to get secretOrKey from anywhere
          </summary>

          - This function dynamically provides the secret or public key for verifying the JWT. It is useful in cases where the key needs to be determined based on the request, such as in multi-tenant applications or when using different keys for different users.
          - Do not use both `secretOrKey` and `secretOrKeyProvider`. Use either of them
          - Parameters:
              - `request`: The original HTTP request object.
              - `rawJwtToken`: The raw JWT token extractedfrom the request.
              - `done`: A function to return the key, with the parameters:
                  - `err`
                  - `secretOrKey` (string or buffer)
          - Example:
              ```js
                  const opts = {
                      secretOrKeyProvider: (request, rawJwtToken, done) =&gt; {
                          // Logic to determine the secret or key dynamically
                          const secretOrKey = getSecretForTenant(request); // Example function to get the secret key based on tenant
                          done(null, secretOrKey); // Pass the key to the callback function
                      }
                  };
              ```

              - Note:
                  1. If secretOrKeyProvider is provided, it overrides the static secretOrKey option
                  2. Useful in scenarios where the key might change per request or per user, such as:
                      - Multi-tenant applications where each tenant has a different key.
                      - Using different keys for different users or services.
                  3. If the key cannot be determined (e.g., a database lookup fails), call done(err) to signal an error.
                  4. When using asymmetric encryption (e.g., RS256), the secretOrKeyProvider would return the public key for verification.

              - Example for multi-tenant application:
                  ```js
                  const opts = {
                      secretOrKeyProvider: (request, rawJwtToken, done) =&gt; {
                          // Get the tenant's key based on some property of the request (e.g., subdomain or user ID)
                          const tenantKey = getTenantKeyFromDb(request.tenantId); // Example function to retrieve tenant's key
                          done(null, tenantKey);
                      }
                  };
                  ```
              - Use Case:
                  - Multi-tenant systems where different tenants have different signing keys.
                  - Dynamic environments where the key cannot be determined statically and must be retrieved or computed based on the incoming request.
          </details>

      4. <details>
              <summary>
              <code>issuer</code> - (string or array) [optional]  Verifies the issuer (iss) claim of the token.
              </summary>
              - Examples:
                            
              ```js
              const opts = {
                          issuer: 'https://accounts.google.com'
                      };
              ```
              ```js
              const opts = {
                      issuer: [
                          'https://accounts.google.com',
                          'https://your-tenant-name.auth0.com/',
                          'https://dev-123456.okta.com'
                      ]
                  };
              ```
              - Use Cases:
                  - **Single Issuer Application**: If all tokens are issued by your application, you would set the issuer option to your app's identifier.
                  - **Third-Party Tokens**: If you're working with tokens issued by third parties (e.g., OAuth providers or external identity systems), you would set issuer to the known trusted issuer.
          </details>

      5. <details>
          <summary>
          <code>algorithms</code> - (array) [optional] List of allowed algorithms for token verification, e.g., ['HS256', 'RS256'].
          </summary>

          - **Purpose**: This option helps enforce which algorithms are accepted for signing JWTs, improving security by rejecting tokens signed with algorithms that are not trusted or expected.
          - **Default Behavior**: If the algorithms option is not provided, the strategy will allow any algorithm,
          - Examples:
              ```js
              const opts = {,
                  algorithms: ['HS256', 'RS256', 'ES256'] // Accepts JWTs signed with HS256, RS256, or ES256 algorithms
              };
              ```
              ```js
              const opts = {,
                  algorithms: ['HS256']
              };
              ```
          </details>

      6. <details>
          <summary>
          <code>audience</code> - (string or array) [optional] To specify the recipients of Jwt
          </summary>

          - **Purpose**: To specify the recipients of Jwt. Will be verifiesd against the recipients mentioned in *aud* coming through *jwt_payload*.
          - Examples:
              ```js
              const opts = {,
                   "aud": "user-service",
              };
              ```
              ```js
              const opts = {,
                   "aud": ["user-service", "billing-service", "yoursite.net"]
              };
              ```
          </details>

      7. <details>
              <summary>
              <code>ignoreExpiration</code> - (boolean) [optional] Whether to ignore the token's expiration time during verification.
              </summary>

              - **Purpose**: 
                  - When you want to accept tokens even if they have expired.
                  - Useful in testing environments where you might not want to deal with token expiration.
                  - The `exp` claim in a JWT specifies the expiration time of the token. Expiry is not set by passport-jwt.
              - **Default Behavior**: By default, ignoreExpiration is false, meaning that Passport-JWT will check the exp claim to ensure the token is not expired.
              - Examples:
                  ```js
                  const opts = {
                      ignoreExpiration: true // Accepts expired tokens
                  };
                  ```
                  ```js
                  const opts = {
                      ignoreExpiration: false // Enforces expiration check
                  };
                  ```
          </details>

      8. <details>
          <summary>
          <code>passReqToCallback</code> - (boolean) [optional] Whether to pass the request object to the verification callback.
          </summary>

          - The `passReqToCallback` option specifies whether the request object should be passed to the `verify` callback function in the `JwtStrategy`. 
          - Useful if you need access to the `req` object for additional logic inside verify callback.
          - Example:
              ```js
              const opts = {
                  passReqToCallback: true // Passes the request object to the verify callback
              };
              ```
              ```js
              passport.use(new JwtStrategy(opts, (req, jwtPayload, done) =&gt; { //now you can add req as parameter
                  // Access request object
                  console.log(req.headers); // Example of accessing headers

                  User.findById(jwtPayload.sub, (err, user) =&gt; {
                      if (err) return done(err, false);
                      if (user) return done(null, user);
                      return done(null, false);
                  });
              }));
              ```
          </details>
                    
      9. <details>
          <summary>
          <code>jsonWebTokenOptions </code> - (object) [optional + deprecated] To pass options to customise token verification
          </summary>

          - **Purpose**: To pass options directly to the underlying jsonwebtoken.verify() and customise token verification.
          - **Deprecated**: Though deprecated, still allows you to pass audience / issuer / algorithms / ignoreExpiration on the options 
          - **Properties**:
              - <details><summary><code>algorithms</code>: (array) Specifies allowed signing algorithms.</summary>

                  - Specifies which algorithms are allowed for verifying the JWT.
                  - eg: `algorithms: ['HS256']`
                  </details>
              - <details><summary><code>audience</code>: (string | RegExp | array) Specifies the expected audience of the JWT.</summary>

                  -  Specifies the expected audience of the JWT (who the token is intended for). It can be a string, regex, or array of strings/regexes.
                  - eg: `audience: 'your-app-client-id'`
                  </details>
              - <details><summary><code>clockTimestamp</code>: (integer) Sets a fixed time for token validation.</summary>

                  - The time in seconds since the epoch to use as the current time when verifying the JWT.
                  ```js 
                  clockTimestamp: Math.floor(Date.now() / 1000) // current time in seconds
                  ```
                  </details>
              - <details><summary><code>clockTolerance</code>: (integer) Helps with clock skew issues.</summary>

                  - Specifies the allowed clock skew (in seconds) when verifying the exp and nbf claims (useful when different servers have slightly unsynchronized clocks).
                  - eg: `clockTolerance: 5`
                  </details>
              - <details><summary><code>complete</code>: (boolean) Returns `{ payload, header, signature }` if true.</summary>

                  -  If true, returns an object with the decoded { payload, header, signature } instead of just the payload.
                  - eg: `complete: true`
                  </details>
              - <details><summary><code>issuer</code>: (string | array) Specifies the expected issuer of the JWT.</summary>

                  - Specifies the expected issuer of the JWT (the entity that issued the token). Can be a string or an array of strings.
                  - eg: `issuer: 'auth.your-app.com'`
                  </details>
              - <details><summary><code>ignoreExpiration</code>: (boolean) Ignores the `exp` claim if true.</summary>

                  -  If true, ignores the exp claim during verification (useful in development, but not recommended in production).
                  - eg: `ignoreExpiration: true`
                  </details>
              - <details><summary><code>ignoreNotBefore</code>: (boolean) Ignores the `nbf` claim if true.</summary>

                  - If true, ignores the nbf (Not Before) claim when verifying the token.
                  - eg: `ignoreNotBefore: true`
                  </details>
              - <details><summary><code>jwtid</code>: (string) Validates the token ID (jti) claim.</summary>

                   - The jti (JWT ID) claim specifies a unique identifier for the token to prevent replay attacks.
                   - eg: `jwtid: 'unique-jwt-id-12345'`
                  </details>
              - <details><summary><code>nonce</code>: (string) Checks the `nonce` claim (used in OpenID Connect).</summary>

                  -  Used to check the nonce claim in OpenID Connect to prevent replay attacks. The nonce is a string used to associate a client session with an ID token.
                  - eg: `nonce: 'nonce-value-generated-at-auth-time'`
                  </details>
              - <details><summary><code>subject</code>: (string) Specifies the expected `sub` (Subject) claim.</summary>

                   - Specifies the expected sub (Subject) claim of the JWT, which typically identifies the principal (user) of the token.
                   - eg: `subject: 'user-id-12345'`
                  </details>
              - <details><summary><code>maxAge</code>: (string | number) Limits how old a token can be.</summary>

                  -  Specifies the maximum allowable age (in seconds or a time string) for the JWT since its iat (Issued At) claim. Used to reject old tokens.
                  - eg: `maxAge: '24h'`
                  </details>
              - <details><summary><code>allowInvalidAsymmetricKeyTypes</code>: (boolean) Allows invalid asymmetric key types if true.</summary>

                  - When set to true, allows invalid asymmetric key types during verification (not recommended unless necessary).
                  - eg: `allowInvalidAsymmetricKeyTypes: true`
                  </details>
          - Examples:
              ```js
              const opts = {
                  jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),
                  secretOrKey: 'your_secret_key',
                  jsonWebTokenOptions: {
                      clockTolerance: 5,  // Allow 5 seconds of clock skew
                      maxAge: '1d',       // Only accept tokens no more than 1 day old
                      algorithms: ['HS256'],  // Only accept tokens signed with HS256
                      ignoreNotBefore: true, // Will ignore token's Not before dates
                      ignoreExpiration: false // Will validate the 'expiration' claim
                  }
              };

              passport.use(new JwtStrategy(opts, (jwtPayload, done) =&gt; {
                  User.findById(jwtPayload.sub, (err, user) =&gt; {
                      if (err) return done(err, false);
                      if (user) return done(null, user);
                      return done(null, false);
                  });
              }));
              ```
          </details>
  </details>

                <details>
  <summary>
      <code>`verify`</code> - (function) Verify Callback
  </summary>

  - **Purpose**: Callback used in the `JwtStrategy` to validate the JWT and determine if it should be accepted.
  - **Parameters**: 
      - <details>
          <summary>
          <code>payload</code> - (object) Payload for verify callback
          </summary>

          - **Purpose**: It is the decoded JWT payload, which contains the claims from the token (e.g., user ID, roles). 
          - It is an object that contains the claims from the decoded JWT. We can only access these claim values and set it. It is set using *jwt.sign()* using [*jsonwebtoken*](http://jwtdocumentation) module.
          - **Properties**  **(Claims)**:
              1. `sub`: The **subject** of the token, usually the user ID. This is a standard claim and is often used to identify the user.
              2. `exp`: The **expiration** time of the token, specified as a Unix timestamp. This is a standard claim used to determine if the token has expired.
              3. `iat`: The **issued-at** time, specified as a Unix timestamp. This indicates when the token was issued.
              4. `iss`: The **issuer** of the token, which is a standard claim indicating who issued the token.
              5. `aud`: The **audience** for which the token is intended. This is a standard claim indicating the recipient(s) of the token. 
              6. `nbf`: **Not Before** - The time before which the token should not be considered valid.
              7. `jti`: **JWT ID** - A unique identifier for the token, which can be used to prevent replay attacks.

              &gt; **Note** : we can also have any custom claims. eg: roles, name.
          - Example:
              ```js
              //setting claims in some other file
              const jwt = require('jsonwebtoken')
              fucntion signIn(req, res){
                  const payload = {
                      sub: user._id, 
                      roles: user.roles, 
                      exp: Math.floor(Date.now() / 1000) + (60 * 60) 
                      //etc
                  }
                  const token = jwt.sign(payload, 'your_jwt_secret_key')
                  res.send({token})
              }

              //accessing those claims
              passport.use(new JwtStrategy(opts, (jwtPayload, done) =&gt; {
                  console.log('User ID:', jwtPayload.sub); 
                  console.log('Token Expiry Time:', jwtPayload.exp); 
                  console.log('User Roles:', jwtPayload.roles);

                  User.findById(jwtPayload.sub, (err, user) =&gt; {
                      if (err) return done(err, false);
                      if (user) return done(null, user);
                      return done(null, false);
                  });
              }));

              ```
          </details>

      - <details>
          <summary>
          <code>done</code> - (fucntion) To indicate the result of the verification.
          </summary>

          - **Purpose**: To indicate the result of the verification.
          - **Parameters**:
              - `err`: Error during verification if any
              - `user`: Any sort of data that comes out after the logic inside verify callback
              - `info`: [optional] Any message regarding error or user
          - Example:
              ```js
              //without info
              passport.use(new JwtStrategy(opts, (jwtPayload, done) =&gt; {
                  User.findById(jwtPayload.sub, (err, user) =&gt; {
                      if (err) return done(err, false);
                      if (user) return done(null, user); // Verification successful
                      return done(null, false); // No user found, but no error
                  });
              }));
              ```
              ```js
              //with info
              passport.use(new JwtStrategy(opts, (jwtPayload, done) =&gt; {
                  User.findById(jwtPayload.sub, (err, user) =&gt; {
                      if (err) return done(err, false);
                      if (!user) return done(null, false, { message: 'User not found' });
                  });
              }));
              ```
            </details>
                
          - <details>
              <summary>
              <code>req</code> [conditional]
              </summary>

              - Only when inside opts, passReqToCallback is true
              ```js
              const opts = {passReqToCallback: true}

              const verify = (req, payload, done)=&gt;{
                  // handle payload data
              }
              ```
              </details>

      - Example:
          ```js
          const verify = (jwtPayload, done) =&gt; {
              // jwtPayload contains the decoded JWT payload
              User.findById(jwtPayload.sub, (err, user) =&gt; {
                  if (err) return done(err, false); // Error during user lookup
                  if (user) return done(null, user); // User found, authentication successful
                  return done(null, false); // User not found, authentication failed
              });
          }

          passport.use(new JwtStrategy(opts, verify));
          ```
   </details>
              </li>
              <li>Example:
                <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">const</span> <span class="nx">JwtStrategy</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Startegy</span><span class="p">(</span><span class="nx">opts</span><span class="p">,</span> <span class="nx">verify</span><span class="p">)</span>
  <span class="nx">passport</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">JwtStrategy</span><span class="p">);</span>
</code></pre></div>                </div>
              </li>
              <li>Strategy is of 2 tyes:
                <ul>
                  <li>
                    <details><summary>With req</summary>

  - paasing opts with true for passReqToCallback enables us to use `req` in verify callbak
  ```js
  const opts = { passReqToCallback:true }

  const verify = (req, payload, done)=&gt;{

  }
  ```
  </details>
                  </li>
                  <li>
                    <details><summary>Without req</summary>
  ```js
  opts = { passReqToCallback:false }
  ```
  </details>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ol>
      </li>
    </ul>
  </li>
  <li>Full Structure (for deafult strategy):
<a id="full-structure"></a>
    <ul>
      <li>Default Strategy:
        <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      <span class="kd">const</span> <span class="p">{</span> <span class="nx">Strategy</span><span class="p">,</span> <span class="nx">ExtractJwt</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">passport-jwt</span><span class="dl">"</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">passport</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">passport</span><span class="dl">"</span><span class="p">);</span> <span class="c1">//to use for passport.use()</span>

      <span class="c1">// Options for the strategy</span>
      <span class="kd">const</span> <span class="nx">opts</span> <span class="o">=</span> <span class="p">{</span>
          <span class="na">jwtFromRequest</span><span class="p">:</span> <span class="nx">ExtractJwt</span><span class="p">.</span><span class="nx">fromAuthHeaderAsBearerToken</span><span class="p">(),</span>
          <span class="na">secretOrKey</span><span class="p">:</span> <span class="dl">"</span><span class="s2">your_jwt_secret_key</span><span class="dl">"</span><span class="p">,</span>
          <span class="c1">//etc</span>
      <span class="p">};</span>

      <span class="c1">//verify callback for strategy</span>
      <span class="kd">const</span> <span class="nx">verify</span> <span class="o">=</span> <span class="p">(</span><span class="nx">jwtPayload</span><span class="p">,</span> <span class="nx">done</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nx">User</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="nx">jwtPayload</span><span class="p">.</span><span class="nx">sub</span> <span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">user</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">done</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">done</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">user</span><span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">done</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// User not found</span>
          <span class="p">}</span>
          <span class="p">});</span>
      <span class="p">};</span>

      <span class="c1">//new jwt-Strategy</span>
      <span class="kd">const</span> <span class="nx">JwtStrategy</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Strategy</span><span class="p">(</span><span class="nx">opts</span><span class="p">,</span> <span class="nx">verify</span><span class="p">)</span>

      <span class="c1">//using new jwt-strategy in passport</span>
      <span class="nx">passport</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">JwtStrategy</span><span class="p">);</span>

      <span class="c1">//authenticating default jwt-strategy</span>
      <span class="nx">passport</span><span class="p">.</span><span class="nx">authenticate</span><span class="p">(</span><span class="dl">'</span><span class="s1">jwt</span><span class="dl">'</span><span class="p">)</span>
</code></pre></div>        </div>
      </li>
      <li>Named Strategy:
        <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      <span class="kd">const</span> <span class="p">{</span> <span class="nx">Strategy</span><span class="p">,</span> <span class="nx">ExtractJwt</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">passport-jwt</span><span class="dl">"</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">passport</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">passport</span><span class="dl">"</span><span class="p">);</span> 

      <span class="kd">const</span> <span class="nx">opts</span> <span class="o">=</span> <span class="p">{</span>
          <span class="na">jwtFromRequest</span><span class="p">:</span> <span class="nx">ExtractJwt</span><span class="p">.</span><span class="nx">fromAuthHeaderAsBearerToken</span><span class="p">(),</span>
          <span class="na">secretOrKey</span><span class="p">:</span> <span class="dl">"</span><span class="s2">your_jwt_secret_key</span><span class="dl">"</span><span class="p">,</span>
          <span class="c1">//etc</span>
      <span class="p">};</span>

      <span class="kd">const</span> <span class="nx">verify</span> <span class="o">=</span> <span class="p">(</span><span class="nx">jwtPayload</span><span class="p">,</span> <span class="nx">done</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nx">User</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="nx">jwtPayload</span><span class="p">.</span><span class="nx">sub</span> <span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">user</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">done</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">done</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">user</span><span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">done</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> 
          <span class="p">}</span>
          <span class="p">});</span>
      <span class="p">};</span>

      <span class="kd">const</span> <span class="nx">JwtStrategy</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Strategy</span><span class="p">(</span><span class="nx">opts</span><span class="p">,</span> <span class="nx">verify</span><span class="p">)</span>

      <span class="c1">//using named jwt-strategy in passport</span>
      <span class="nx">passport</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">my-jwt</span><span class="dl">'</span><span class="p">,</span> <span class="nx">JwtStrategy</span><span class="p">);</span>

      <span class="c1">//authenticating named jwt-strategy</span>
      <span class="nx">passport</span><span class="p">.</span><span class="nx">authenticate</span><span class="p">(</span><span class="dl">'</span><span class="s1">my-jwt</span><span class="dl">'</span><span class="p">)</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<h2 id="authenticating-jwt-after-strategy-configuration">Authenticating jwt after strategy configuration</h2>

<ul>
  <li>Ways:
    <ul>
      <li>As of understood till date, passport jwt can be authenticated in 2ways:
        <ul>
          <li>With session support (<strong>without callback</strong>)</li>
          <li>Without session support (<strong>with callback</strong>)</li>
        </ul>
      </li>
      <li>With session support (without callback), one would need to many extar methods like <code class="language-plaintext highlighter-rouge">passport.serializeUser</code>, <code class="language-plaintext highlighter-rouge">session()</code>, etc. We would not have to specifically set <code class="language-plaintext highlighter-rouge">req.user</code> to user. Passport would do it internally for us.</li>
      <li>Without session support (with callback), we dont need any extra methods. But we would need to set <code class="language-plaintext highlighter-rouge">req.user</code> to user explicitly by us.</li>
    </ul>
  </li>
</ul>

<ol>
  <li>Without session support (<strong>with callback</strong>)
<a id="Without"></a>
    <ul>
      <li>
        <p>in the <a href="https://github.com/jaredhanson/passport/blob/217018dbc46dcd4118dd6f2c60c8d97010c587f8/lib/middleware/authenticate.js#L221">internal code</a>, if passport.authenticate gets a callback, it doesnt call any other internal function. It just returns that callback with user and err, to handle by ourself.
 ```js
 // Options for JWT strategy, including extractor function and secret key
 const optsJwt = {
  jwtFromRequest: cookieExtractor,
  secretOrKey: constant.secretKey
 }
 // Function to verify JWT token and retrieve user information
 const verifyJwt = async function (jwt_payload, done) {
  if (!jwt_payload.id) return done(null, false);</p>

        <p>try {
      let user = await User.findOne({ _id: jwt_payload.id });</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  if (user) return done(null, santizeUser(user));
  else return done(null, false);
</code></pre></div>        </div>

        <p>} catch (error) {
      return done(err, false);
  }
 }</p>
      </li>
    </ul>

    <p>// Options for Local strategy, specifying the field for username
 const optsLocal = { usernameField: “email” }
 // Function to verify local credentials and handle authentication
 const verifyLocal = async function (email, password, done) {
     try {
         const user = await User.findOne({ email: email }).exec();</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     if (!user) {
         return done(null, false, { message: "No such user email" });
     }

     crytpoJwt(user, password, done)

 } catch (error) {
     return done(error);
 }  }
</code></pre></div>    </div>

    <p>// Initialize Passport with JWT strategy
 passport.use(“jwt”,new JwtStrategy(optsJwt, verifyJwt););</p>

    <p>// Middleware to authenticate requests using JWT strategy
 app.use((req, res, next) =&gt; {
     passport.authenticate(“jwt”, (err, user, info) =&gt; {
         if (err || !user)
             return next(new ApiError(httpStatus.UNAUTHORIZED, “Please authenticate”))</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     req.user = user;
     next()
 })(req, res, next)  })  ```
</code></pre></div>    </div>
  </li>
  <li>With session support (<strong>without callback</strong>)
<a id="With"></a>
    <ul>
      <li>When with callback, internalluy, passport passes many checks and process including
        <ul>
          <li>needing a session</li>
          <li>needing to use passport.serializeUser atleast once with a callback containing user.id/user</li>
        </ul>
      </li>
      <li>In the latest version, for authenticating using <em>passport-jwt</em> configured strategy, we need to use 2 extra methods from <em>passport</em> package and 1 method from <em>express-session</em> package:
        <ul>
          <li>
            <details>
  <summary>
  <code>passport.authenticate()</code> from passport
  </summary>

  - `passport.authenticate()` is a passport middleware. It has been [customised internally](https://github.com/mikenicholson/passport-jwt/blob/master/lib/strategy.js#L90) to authenticate jwt via passport-jwt package.
  - 3 paramters:
      - strategy: (string|array)
      - options
      - callback [optional]
  - <details>
      <summary>It is wrapped inside a wrapper as an express middleware to access req, res and next. Without the wrapper it won't pass on to the next function.
      </summary>

      ```js
      app.use((req, res, next)=&gt;{
          passport.authenticate('jwt')(req, res, next)
      })
      ```
      </details>
  - <details>
      <summary>
      In older versions it would itself be placed as a middleware, but not anymore
      </summary>

      ```js
      app.use(passport.authenticate('jwt'))
      ```
      </details>
            
  - Parameters:
      - <details>
          <summary>
              <code>strategy</code>: (string or array)
          </summary>

          - **Purpose**: To point to the strategies named during configuration.
          - **Example**: jwt, my-jwt, [jwt, my-jwt], etc
          </details>

      - <details>
          <summary>
              <code>options</code>: (object) [optional]
          </summary>

          - **Purpose**: Options to control the behavior of the authentication middleware. 
          - It controls the behaviour at individual route/request level in comparison to opts options which controls behaviour at global/strategy level.
          - If there are conflicting options between opts and authenticateOptions, then authenticateOptions will override for that particular route.
          - **Properties**:
              <details>
              <summary>1. authInfo</summary>
              <p><strong>Description:</strong> Whether to include additional authentication information.</p>
              <p><strong>Default:</strong> undefined (additional info is not included).</p>
              <p><strong>Example:</strong></p>
              <pre><code>passport.authenticate('strategy', { authInfo: true });</code></pre>
              </details>

              <details>
              <summary>2. assignProperty</summary>
              <p><strong>Description:</strong> Assigns the object provided by the verify callback to the specified property on the <code>req</code> object.</p>
              <p><strong>Default:</strong> undefined (the object is assigned to <code>req.user</code>).</p>
              <p><strong>Example:</strong></p>
              <pre><code>passport.authenticate('strategy', { assignProperty: 'userAccount' });</code></pre>
              </details>

              <details>
              <summary>3. failureFlash</summary>
              <p><strong>Description:</strong> True to flash failure messages or a string to use as a flash message for failures.</p>
              <p><strong>Default:</strong> undefined (failure messages are not flashed).</p>
              <p><strong>Example:</strong></p>
              <pre><code>passport.authenticate('strategy', { failureFlash: 'Login failed' });</code></pre>
              </details>

              <details>
              <summary>4. failureMessage</summary>
              <p><strong>Description:</strong> True to store failure message in <code>req.session.messages</code>, or a string to use as an override message for failure.</p>
              <p><strong>Default:</strong> undefined (failure messages are not stored).</p>
              <p><strong>Example:</strong></p>
              <pre><code>passport.authenticate('strategy', { failureMessage: 'Login unsuccessful' });</code></pre>
              </details>

              <details>
              <summary>5. failureRedirect</summary>
              <p><strong>Description:</strong> URL to redirect to after a failed login attempt.</p>
              <p><strong>Default:</strong> undefined (no redirect occurs).</p>
              <p><strong>Example:</strong></p>
              <pre><code>passport.authenticate('strategy', { failureRedirect: '/login' });</code></pre>
              </details>

              <details>
              <summary>6. failWithError</summary>
              <p><strong>Description:</strong> Whether to fail with an error.</p>
              <p><strong>Default:</strong> undefined (does not fail with error).</p>
              <p><strong>Example:</strong></p>
              <pre><code>passport.authenticate('strategy', { failWithError: true });</code></pre>
              </details>

              <details>
              <summary>7. keepSessionInfo</summary>
              <p><strong>Description:</strong> Whether to keep session information.</p>
              <p><strong>Default:</strong> undefined (session info is not specifically retained).</p>
              <p><strong>Example:</strong></p>
              <pre><code>passport.authenticate('strategy', { keepSessionInfo: true });</code></pre>
              </details>

              <details>
              <summary>8. session</summary>
              <p><strong>Description:</strong> Save login state in session.</p>
              <p><strong>Default:</strong> true (session is used by default).</p>
              <p><strong>Example:</strong></p>
              <pre><code>passport.authenticate('strategy', { session: false });</code></pre>
              </details>

              <details>
              <summary>9. scope</summary>
              <p><strong>Description:</strong> Scope of access required.</p>
              <p><strong>Default:</strong> undefined (no scope is specified).</p>
              <p><strong>Example:</strong></p>
              <pre><code>passport.authenticate('strategy', { scope: ['read', 'write'] });</code></pre>
              </details>

              <details>
              <summary>10. successFlash</summary>
              <p><strong>Description:</strong> True to flash success messages or a string to use as a flash message for success.</p>
              <p><strong>Default:</strong> undefined (success messages are not flashed).</p>
              <p><strong>Example:</strong></p>
              <pre><code>passport.authenticate('strategy', { successFlash: 'Login successful' });</code></pre>
              </details>

              <details>
              <summary>11. successMessage</summary>
              <p><strong>Description:</strong> True to store success message in <code>req.session.messages</code>, or a string to use as an override message for success.</p>
              <p><strong>Default:</strong> undefined (success messages are not stored).</p>
              <p><strong>Example:</strong></p>
              <pre><code>passport.authenticate('strategy', { successMessage: 'Welcome back!' });</code></pre>
              </details>

              <details>
              <summary>12. successRedirect</summary>
              <p><strong>Description:</strong> URL to redirect to after a successful login.</p>
              <p><strong>Default:</strong> undefined (no redirect occurs).</p>
              <p><strong>Example:</strong></p>
              <pre><code>passport.authenticate('strategy', { successRedirect: '/dashboard' });</code></pre>
              </details>

              <details>
              <summary>13. successReturnToOrRedirect</summary>
              <p><strong>Description:</strong> URL to redirect to or return to after a successful login.</p>
              <p><strong>Default:</strong> undefined (no redirect or return occurs).</p>
              <p><strong>Example:</strong></p>
              <pre><code>passport.authenticate('strategy', { successReturnToOrRedirect: '/profile' });</code></pre>
              </details>

              <details>
              <summary>14. state</summary>
              <p><strong>Description:</strong> State parameter for the request.</p>
              <p><strong>Default:</strong> undefined (no state is set).</p>
              <p><strong>Example:</strong></p>
              <pre><code>passport.authenticate('strategy', { state: 'xyz' });</code></pre>
              </details>

              <details>
              <summary>15. pauseStream</summary>
              <p><strong>Description:</strong> Pause the request stream before deserializing the user object from the session.</p>
              <p><strong>Default:</strong> false (stream is not paused).</p>
              <p><strong>Example:</strong></p>
              <pre><code>passport.authenticate('strategy', { pauseStream: true });</code></pre>
              </details>

              <details>
              <summary>16. userProperty</summary>
              <p><strong>Description:</strong> Property on <code>req</code> that will be set to the authenticated user object.</p>
              <p><strong>Default:</strong> 'user' (authenticated user is set to <code>req.user</code>).</p>
              <p><strong>Example:</strong></p>
              <pre><code>passport.authenticate('strategy', { userProperty: 'currentUser' });</code></pre>
              </details>

              <details>
              <summary>17. passReqToCallback</summary>
              <p><strong>Description:</strong> Whether to pass the request object to the callback.</p>
              <p><strong>Default:</strong> undefined (request object is not passed to the callback).</p>
              <p><strong>Overrides:</strong> Overrides passReqToCallback set in opts of strategy configuration</p>
              <p><strong>Example:</strong></p>
              <pre><code>passport.authenticate('strategy', { passReqToCallback: true });</code></pre>
              </details>

              <details>
              <summary>18. prompt</summary>
              <p><strong>Description:</strong> Prompt parameter for the request.</p>
              <p><strong>Default:</strong> undefined (no prompt is set).</p>
              <p><strong>Example:</strong></p>
              <pre><code>passport.authenticate('strategy', { prompt: 'login' });</code></pre>
              </details>

          </details>


      - <details>
          <summary>
              <code>callback</code>: (function) [optional]
          </summary>

          - **Purpose**: Handles the result of the authentication process and provides feedback or further actions based on the outcome.

          - **Parameters**:
              1. <details>
                  <summary>
                      <code>err</code>: (Error or <code>null</code>)
                  </summary>

                  - **Description**: Contains any error that occurred during the authentication process.
                  - **Type**: err | false
                  - **Example**: An error object if something went wrong, otherwise `null`.
                  </details>

              2. <details>
                  <summary>
                      <code>user</code>: (object | string | Array)
                  </summary>

                  - **Description**: The authenticated user object if authentication was successful, or `false` if no user was authenticated.
                  - **Type**: User | false | null
                  - **Example**: The user data retrieved from the database if authentication is successful.
                  </details>

              3. <details>
                  <summary>
                      <code>info</code>: (Object or <code>false</code>)
                  </summary>

                  - **Description**: Contains additional information or error messages about the authentication process. This can include details about why authentication failed.
                  - **Type**: object | string | Array
                  - **Example**: An object with a `message` property if authentication fails, or `false` if no additional information is available.
                  </details>

              4. <details>
                  <summary>
                      <code>status</code>: (number | Array)
                  </summary>

                  - **Description**: The HTTP status code representing the result of the authentication attempt.
                  - **Type**: number | Array (HTTP status code)
                  - **Example**: `401` for unauthorized access, `200` for successful authentication.
                  </details>
          </details>




  - Examples:
      ```js
      //default strategy without optional parameters
      app.post("/profile", (req, res, next) =&gt; {
          passport.authenticate("jwt")(req, res, next)
      });
      ```
      <details>
          <summary>
          more examples
          </summary>

          ```js
          //custom strategy without optional parameters
          app.post("/profile", (req, res, next) =&gt; {
              passport.authenticate("my-jwt")(req, res, next)
          });
          ```
          ```js
          //default strategy with optional parameters
          app.post("/profile", (req, res, next) =&gt; {
              passport.authenticate("jwt", { session: false }, function(err, user, info, status) {
                  if (err) {
                      return res
                              .status(500)
                              .json({ message: 'An error occurred', error: err });
                  }

                  if (!user) {
                      return res
                              .status(401)
                              .json({ message: 'Unauthorized', info: info });
                  }

                  //in case of callback we need to set req.user=user
                  req.user=user

                  res.send(status).json(user.profile);
              })(req, res, next)
          });
          ```
          </details>
  </details>
          </li>
          <li>
            <details>
  <summary>
  <code>passport.serializeUser()</code> from passport
  </summary>

  - We need passport.serializeUser() during the process of logIn which happens inside passport.authenticate()
  - <details>
      <summary>Input parameter: <code>callback function</code>
      </summary>

      - <details><summary>input parameters of cb fn: <code>user</code>, <code>done</code></summary>

          - `user`: The user object returned from the authentication process.
          - <details><summary><code>done</code>: A callback function that you call after serializing the user, which takes two parameters: <code>err</code>, <code>id</code></summary>

              - `err`: Any error that occurred during serialization.
              - `id`: The user ID or any unique identifier that will be stored in the session.
              ```js
              passport.serializeUser((user, done)=&gt;{
                  done(err, id)
              });
              ```
              </details>

          ```js
          passport.serializeUser((user, done)=&gt;{});
          ```
          </details>

      ```js
      passport.serializeUser(callback);
      ```

      </details>

  ```js
  // structure of serialiseUser
  passport.serializeUser((user, done) =&gt; {
      done(null, user.id);
  });
  //err can be null or err
  //user can be false, user, user.id, or anything related to user
  ```
  </details>
          </li>
          <li>
            <details>
  <summary>
  <code>session()</code> from express-session
  </summary>

  - session() is also necssary to logIn using passport.authenticate()
  - Parameter: `sessionOptions` (object)
  - So structure is `session(sessionOptions)
  - ```js
      //structure of session
      const express = require("express");
      const session = require("express-session");

      const app = express()

      app.use(session({
              secret: process.env.SESSION_SECRET,
          resave: false,
              saveUninitialized: false,
      }))
      ```
                    
  - Session option keys:
      <details>
      <summary><strong>1. secret</strong></summary>
      <ul>
          <li><strong>Type:</strong> string | array</li>
          <li><strong>Default:</strong> N/A</li>
          <li><strong>Description:</strong> String(s) used to sign the session ID cookie.</li>
          <li><strong>Example:</strong> <code>secret: 'mySecret'</code></li>
      </ul>
      </details>

      <details>
      <summary><strong>2. genid(req)</strong></summary>
      <ul>
          <li><strong>Type:</strong> function [(req: express.Request) =&gt; string]</li>
          <li><strong>Default:</strong> Uses uid-safe library to generate a unique session ID.</li>
          <li><strong>Description:</strong> Function to generate session IDs.</li>
          <li><strong>Example:</strong> <code>genid: () =&gt; 'customID'</code></li>
      </ul>
      </details>

      <details>
      <summary><strong>3. name</strong></summary>
      <ul>
          <li><strong>Type:</strong> string </li>
          <li><strong>Default:</strong> 'connect.sid'</li>
          <li><strong>Description:</strong> Name of the session ID cookie.</li>
          <li><strong>Example:</strong> <code>name: 'session_id'</code></li>
      </ul>
      </details>

      <details>
      <summary><strong>4. store</strong></summary>
      <ul>
          <li><strong>Type:</strong> Store </li>
          <li><strong>Default:</strong> MemoryStore (in-memory session store)</li>
          <li><strong>Description:</strong> Specifies session store instance.</li>
          <li><strong>Example:</strong> <code>store: new RedisStore()</code></li>
      </ul>
      </details>

      <details>
      <summary><strong>5. cookie</strong></summary>
      <ul>
          <li><strong>Type:</strong> object </li>
          <li><strong>Default:</strong> N/A</li>
          <li><strong>Description:</strong> Options for the session cookie (e.g., maxAge, secure).</li>
          <li><strong>CookieOptions:</strong> 
          <details>
              <summary><strong>1. maxAge</strong></summary>
              <ul>
                  <li><strong>Type:</strong> number </li>
                  <li><strong>Default:</strong> N/A</li>
                  <li><strong>Description:</strong> Specifies the maximum age of the cookie in milliseconds.</li>
                  <li><strong>Example:</strong> <code>maxAge: 3600000</code> (1 hour)</li>
              </ul>
              </details>

      <details>
          <summary><strong>2. partitioned</strong></summary>
          <ul>
              <li><strong>Type:</strong> boolean </li>
              <li><strong>Default:</strong> false</li>
              <li><strong>Description:</strong> Specifies the `Partitioned` attribute for the cookie. Not fully standardized yet.</li>
              <li><strong>Example:</strong> <code>partitioned: true</code></li>
          </ul>
          </details>

      <details>
          <summary><strong>3. priority</strong></summary>
          <ul>
              <li><strong>Type:</strong> "low" | "medium" | "high" </li>
              <li><strong>Default:</strong> "medium"</li>
              <li><strong>Description:</strong> Specifies the `Priority` attribute of the cookie (low, medium, or high).</li>
              <li><strong>Example:</strong> <code>priority: 'high'</code></li>
          </ul>
          </details>

      <details>
          <summary><strong>4. signed</strong></summary>
          <ul>
              <li><strong>Type:</strong> boolean </li>
              <li><strong>Default:</strong> false</li>
              <li><strong>Description:</strong> Specifies whether the cookie is signed with the secret.</li>
              <li><strong>Example:</strong> <code>signed: true</code></li>
          </ul>
          </details>

      <details>
          <summary><strong>5. expires</strong></summary>
          <ul>
              <li><strong>Type:</strong> Date | null </li>
              <li><strong>Default:</strong> No expiration set (non-persistent cookie).</li>
              <li><strong>Description:</strong> Specifies the expiration date for the cookie.</li>
              <li><strong>Example:</strong> <code>expires: new Date(Date.now() + 3600000)</code></li>
          </ul>
          </details>

      <details>
          <summary><strong>6. httpOnly</strong></summary>
          <ul>
              <li><strong>Type:</strong> boolean </li>
              <li><strong>Default:</strong> true</li>
              <li><strong>Description:</strong> Specifies whether the cookie is HTTP-only, preventing access from client-side JavaScript.</li>
              <li><strong>Example:</strong> <code>httpOnly: false</code></li>
          </ul>
          </details>

      <details>
          <summary><strong>7. path</strong></summary>
          <ul>
              <li><strong>Type:</strong> string </li>
              <li><strong>Default:</strong> '/'</li>
              <li><strong>Description:</strong> Specifies the path for which the cookie is valid.</li>
              <li><strong>Example:</strong> <code>path: '/admin'</code></li>
          </ul>
          </details>

      <details>
          <summary><strong>8. domain</strong></summary>
          <ul>
              <li><strong>Type:</strong> string </li>
              <li><strong>Default:</strong> No domain set.</li>
              <li><strong>Description:</strong> Specifies the domain for which the cookie is valid.</li>
              <li><strong>Example:</strong> <code>domain: 'example.com'</code></li>
          </ul>
          </details>

      <details>
          <summary><strong>9. secure</strong></summary>
          <ul>
              <li><strong>Type:</strong> boolean | "auto" </li>
              <li><strong>Default:</strong> false</li>
              <li><strong>Description:</strong> Specifies whether the cookie is only sent over HTTPS.</li>
              <li><strong>Example:</strong> <code>secure: true</code></li>
          </ul>
          </details>

      <details>
          <summary><strong>10. encode</strong></summary>
          <ul>
              <li><strong>Type:</strong> (val: string) =&gt; string </li>
              <li><strong>Default:</strong> Default encoder for cookie values.</li>
              <li><strong>Description:</strong> Specifies a custom encoding function for the cookie value.</li>
              <li><strong>Example:</strong> <code>encode: encodeURIComponent</code></li>
          </ul>
          </details>

      <details>
          <summary><strong>11. sameSite</strong></summary>
          <ul>
              <li><strong>Type:</strong> boolean | "lax" | "strict" | "none" </li>
              <li><strong>Default:</strong> false</li>
              <li><strong>Description:</strong> Specifies the `SameSite` attribute for cross-site cookie control (strict, lax, or none).</li>
              <li><strong>Example:</strong> <code>sameSite: 'strict'</code></li>
          </ul>
          </details>
                    
      </li>
          <li><strong>Example:</strong> <code>cookie: { maxAge: 60000 }</code></li>
      </ul>
            

      </details>

      <details>
      <summary><strong>6. rolling</strong></summary>
      <ul>
          <li><strong>Type:</strong> boolean </li>
          <li><strong>Default:</strong> false</li>
          <li><strong>Description:</strong> Resets session expiration on every response.</li>
          <li><strong>Example:</strong> <code>rolling: true</code></li>
      </ul>
      </details>

      <details>
      <summary><strong>7. resave</strong></summary>
      <ul>
          <li><strong>Type:</strong> boolean </li>
          <li><strong>Default:</strong> true (deprecated)</li>
          <li><strong>Description:</strong> Forces session to be saved on every request, even if unmodified.</li>
          <li><strong>Example:</strong> <code>resave: false</code></li>
      </ul>
      </details>

      <details>
      <summary><strong>8. proxy</strong></summary>
      <ul>
          <li><strong>Type:</strong> boolean </li>
          <li><strong>Default:</strong> undefined</li>
          <li><strong>Description:</strong> Trust reverse proxy when setting secure cookies.</li>
          <li><strong>Example:</strong> <code>proxy: true</code></li>
      </ul>
      </details>

      <details>
      <summary><strong>9. saveUninitialized</strong></summary>
      <ul>
          <li><strong>Type:</strong> boolean </li>
          <li><strong>Default:</strong> true (deprecated)</li>
          <li><strong>Description:</strong> Saves uninitialized sessions. Useful for login sessions.</li>
          <li><strong>Example:</strong> <code>saveUninitialized: false</code></li>
      </ul>
      </details>

      <details>
      <summary><strong>10. unset</strong></summary>
      <ul>
          <li><strong>Type:</strong> "destroy" | "keep" </li>
          <li><strong>Default:</strong> 'keep'</li>
          <li><strong>Description:</strong> Controls behavior when session is deleted.</li>
          <li><strong>Example:</strong> <code>unset: 'destroy'</code></li>
      </ul>
      </details>

      </details>
          </li>
        </ul>
      </li>
      <li>Complete structure for authentication:
        <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">session</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">express-session</span><span class="dl">"</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">passport</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">passport</span><span class="dl">"</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">()</span>

  <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">session</span><span class="p">({</span> <span class="c1">//to be called on top</span>
      <span class="na">secret</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">SESSION_SECRET</span><span class="p">,</span>
  <span class="p">}))</span>

  <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span> <span class="c1">//can be called anywhere</span>
      <span class="nx">passport</span><span class="p">.</span><span class="nx">authenticate</span><span class="p">(</span><span class="dl">'</span><span class="s1">jwt</span><span class="dl">'</span><span class="p">)(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span>
  <span class="p">})</span>

  <span class="nx">passport</span><span class="p">.</span><span class="nx">serializeUser</span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span>

  <span class="p">})</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<h2 id="sending-jwt-from-client-to-server">Sending jwt from client to server</h2>
<ol>
  <li>
    <details>
 <summary>
 Using Authorisation header (most common)
 </summary>

 - <details>
     <summary>
     Bearer Token: The most common and standard method for JWTs.
     </summary>

     ```js
     // Client-side (e.g., using Axios in JavaScript)
     axios.get('/protected-resource', {
         headers: {
             'Authorization': `Bearer ${token}`
         }
     });

     // Server-side (Express with Passport)
     const opts = {
         jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(), // Extract JWT from Bearer Token
         secretOrKey: SECRET_KEY,
     }
     ```
     <details>

 - <details>
     <summary>
     Custom Scheme: Allows custom authentication schemes as needed.
     </summary>

     ```js
     // Client-side (e.g., using Axios in JavaScript)
     axios.get('/protected-resource', {
          headers: {
             'Authorization': `Bearer ${token}`
         }
     });

     // Server-side (Express)
     const customSchemeExtractor = (req) =&gt; {
         const authHeader = req.headers['authorization'];
         if (authHeader &amp;&amp; authHeader.startsWith('customScheme ')) {
             return authHeader.split(' ')[1];
         }
         return null;
     };
       
    const opts = {
         jwtFromRequest: customSchemeExtractor, // Use custom extractor
         secretOrKey: SECRET_KEY,
     }
     ```
     <details>

 - <details>
     <summary>
     Digest Authentication: Less common for JWTs, used in specific scenarios.
     </summary>

     ```js
     // Client-side (e.g., using Axios in JavaScript)
     axios.get('/protected-resource', {
          headers: {
             'Authorization': `Digest ${token}`
         }
     });

     // Server-side (Express)
     const digestExtractor = (req) =&gt; {
         const authHeader = req.headers['authorization'];
         if (authHeader &amp;&amp; authHeader.startsWith('Digest ')) {
             return authHeader.split(' ')[1];
         }
         return null;
     };
       
    const opts = {
         jwtFromRequest: digestExtractor, // Use custom extractor
         secretOrKey: SECRET_KEY,
     }
     ```
     <details>

 - <details>
     <summary>
     Basic Authentication: Typically used for credentials, not recommended for JWTs.
     </summary>

     ```js
     // (Not Recommended for JWTs)
     // Client-side (e.g., using Axios in JavaScript)
     axios.get('/protected-resource', {
          headers: {
             'Authorization': `Basic ${token}`
         }
     });

     // Server-side (Express)
     const basicExtractor = (req) =&gt; {
         const authHeader = req.headers['authorization'];
         if (authHeader &amp;&amp; authHeader.startsWith('Basic ')) {
             return authHeader.split(' ')[1];
         }
         return null;
     };
       
    const opts = {
         jwtFromRequest: basicExtractor, // Use custom extractor
         secretOrKey: SECRET_KEY,
     }
     ```
     <details>
 </details>

</details></details></details></details></details></details></details></details>
  </li>
  <li>
    <details>
 <summary>
 Using cookies
 </summary>

 - For client side:
     - We dont have to do anything. just run both server an dclient on same url (eg: http://localhost:3000), client using build file and server direclty running using node index.
     - when both run on same server:
         - cookies sent to client from sever will be stored as Set-Cookies in header and 
         - server itself will read it back when any req is sent from client to server
     ```js
     //client side 
     axios.get('/protected-resource')

     // server side
     const cookieParser = require('cookie-parser')
     const express = require('express');

     const app = express()
     app.use(cookieParser())

     //custom extractor
     var cookieExtractor = function (req) {
     var token = null;
     if (req &amp;&amp; req.cookies) {
         token = req.cookies["jwt"];
     }
     return token;
     };

     const opts = {
         jwtFromRequest: cookieExtractor,
         secretOrKey: 'your_secret_key'
     };
     ```
 </details>
  </li>
  <li>
    <details>
 <summary>
 Using URL Query Parameters
 </summary>

 ```js
 // Client-side (e.g., using Axios)
 axios.get('/protected-resource?token=' + token)   

 // Custom extractor function for query parameters
 const queryParamExtractor = (req) =&gt; {
     return req.query.token; // Extract JWT from query parameter 'token'
 };   

 const opts = { 
     jwtFromRequest: queryParamExtractor, // Use custom extractor
     secretOrKey: SECRET_KEY,
 }
 ```  
 </details>
  </li>
  <li>
    <details>
 <summary>
 Using Custom Headers
 </summary>

 ```js
 // Client-side (e.g., using Axios)
 axios.get('/protected-resource', {
     headers: {
         'X-Custom-Header': token // Replace 'X-Custom-Header' with your custom header name
     }
 });

 // Custom extractor function for custom headers
 const customHeaderExtractor = (req) =&gt; {
     return req.headers['x-custom-header']; // Replace 'x-custom-header' with your custom header name
 };

 const opts = {
     jwtFromRequest: customHeaderExtractor, // Use custom extractor
     secretOrKey: SECRET_KEY,
 }
 ```
 </details>
  </li>
</ol>

</li><li><span class="post-meta">18 Oct 2020</span>
        <h3>
          <a class="post-link" href="/documentation/web-dev/2">
            Email Service Post Title
          </a>
        </h3><h3 id="from-frontend">From Frontend</h3>
<ol>
  <li>EmailJS: https://github.com/emailjs-com/emailjs-sdk</li>
</ol>

</li><li><span class="post-meta">18 Oct 2020</span>
        <h3>
          <a class="post-link" href="/documentation/api-docs/">
            Api Docs
          </a>
        </h3><h2 id="api-documentaion-tools">Api Documentaion Tools</h2>

</li></ul>

    <p class="rss-subscribe">subscribe <a href="/documentation/feed.xml">via RSS</a></p></div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/documentation/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Blog &amp; Docs</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Anusree Anilkumar</li><li><a class="u-email" href="mailto:anilkumaranusree113@gmail.com">anilkumaranusree113@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/Anusree6154s"><svg class="svg-icon"><use xlink:href="/documentation/assets/minima-social-icons.svg#github"></use></svg> <span class="username">Anusree6154s</span></a></li><li><a href="https://www.linkedin.com/in/anusreeanilkumar1"><svg class="svg-icon"><use xlink:href="/documentation/assets/minima-social-icons.svg#linkedin"></use></svg> <span class="username">anusreeanilkumar1</span></a></li><li><a href="https://www.twitter.com/anu6154s"><svg class="svg-icon"><use xlink:href="/documentation/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">anu6154s</span></a></li><li><a href="/documentation/feed.xml"><svg class="svg-icon"><use xlink:href="/documentation/assets/minima-social-icons.svg#rss"></use></svg> <span>rss</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>I&#39;m learning to build web apps using the MERN stack, Next.js, and TypeScript. I love tinkering with new tech and sharing what I learn along the way. This is my little corner where I jot down anything that I find difficult in my tech journey. I hope you find this space useful!</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
